# ~ 12월 28일

* 간단한 프로젝트 SR 
* 운동과정을 잔디로 관리하는 어플을 만들기로 결심

---

# 12월 28일

* 프로젝트 요구사항 정리
* 데이터베이스 스키마 설계
* 와이어 프레임 작성

스키마 설계

```
해당 습관에 최댓값을 DB에 저장할 것인가?
-> 저장하는 경우
접근이 빠르다. 기존에 저장한 값들을 계속 불러와서 비교할 필요가 없다
하지만 새로운 값이 들어올 때 마다 계속 비교해야한다. 
만약 잘못된 값이 들어온 경우 계속 잘못된 값으로 계산이 된다. -> 버튼을 클릭해서 해결할 수 있도록 모색 방안 (새로고침)\
```



```
해당 습관의 타입을 저장하는 테이블을 분리할 것인가?
-> 분리하는 경우
조인의 횟수가 많아진다. 커스텀 타입의 경우 타입이 많아진다. 
-> 분리하지 않는경우
칼럼이 늘어난다 (1개에서 2개로)
조인이 줄어든다
중복이 발생한다 -> 하지만 구현의 편의성을 생각한다면 분리하지 않는게 좋지 않을까?

=> 정규형을 고려
제 1 정규형의 경우 모든 원자값이 1개의 값을 가지고 있으므로 지켜지고 있다.
제 2 정규형의 경우 habbit에서 id, type, type_custom이 서로 종속성을 보여주고있다. 즉 만족하지 않는다 
	제 2 정규형을 지키기 위해서는 type을 분리해줘야한다.
	그럼 커스텀 타입의 경우는 어떻게 대처할까?
	타입은 
		1. Boolean: 했는지 안했는지
		2. Num: 숫자 (횟수, 권, 등등 캐주얼한 숫자) -> Enum
		3. Time: 시간 (시간 분) -> 시작시간, 끝시간 
	이렇게 3가지가 있다. 이 중에서 2번의 경우가 문제가 발생한다. 사람마다 권으로 지정하는 경우가 있을 수 있고, 횟수로 지정하는 경우가 있을 수 있다
	이런 문제들을 해결하기 위해서 종속을 무시하고, 제2 정규형을 무시하고 스키마를 만들어도 되는것일까? 
	제 2 정규형을 지켜야하는 이유는 갱신이상에 대한 이슈다. 만약 책읽기에 대한 습관을 만들고 그 습관이 "시간"을 저장한다고 가정해보자. 
	이 시간에 대한 타입이 바뀌어야하는 경우 모든 테이블의 시간을 전부 바꿔줘야한다. 만약 1개라도 바뀌지 않는 경우 갱신이상이 발생한다. 
	
	갱신이상에 대한 이슈로 타입에 대한 테이블을 분리해줘야한다는 것은 인지했다. 하지만 커스텀타입에 대한 문제가 아직 남게된다. 
	고민을 해보다 커스텀 타입 테이블, 기본 타입 테이블을 나눠주기로 했다.
	

```



```
위처럼 type과 custom_type에 대한 테이블을 나눠주었다. 이렇게 된다면 habbit테이블에서 type이 null인경우 type_custom이 있을것이다.
커스텀 타입은 지정한 사람마다 다르므로 유저에 대한 정보도 외래키로 받을 수 있게 했다. 이렇게 했더니 제 2 정규형을 만족하게 되었고 각 사용자 입장에서 봤을 때 타입에 대한 변경이 있는경우 (습관에 대한 타입변경이 아닌 타입 자체에 대한 변경) 해당 타입으로 생성되어있는 모든 habbit의 요소들이 바뀔 수 있고, 갱신이상에 대한 문제를 방지할 수 있다. 

다음은 제 3 정규형이다. 이행종속이 있는 테이블이 없으므로 제 3정규형도 만족한다. 
마지막으로는 BCNF이다. 
```

데이터 베이스 정규화하는 도중 SR을 다시 하게 되었다.

와이어프레임을 작성하면서 앱의 동작에 대해서 다시 이야기해보았고 사용자 지정 타입에 대해서 서버 입장으로 계속 말했다. 

(사용자가 타입 지정하는 경우 계속 DB에 쌓이는데 문제 생긴다)

이렇게되어 와이어 프레임은 어느정도 마무리되었고 기능적인 측면은 마무리되어 스키마를 다시 작성하기로 했다.

건의사항을 몇가지 제안했다. 이것처럼 Dev로그를 모두 작성해서 공유하는 폴더 생성, 그리고 팀 룰을 더 작성해서 브랜치 이름, 커밋 룰을 정했으면 좋겠다라는 내용을 건의했다.

---





